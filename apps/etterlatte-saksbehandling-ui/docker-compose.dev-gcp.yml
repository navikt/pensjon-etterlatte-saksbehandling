version: "3"
#name: saksbehandling-ui-dev-gcp
services:
  frackend-dev-gcp:
    container_name: frackend-dev-gcp
    build:
      context: server
      dockerfile: Dockerfile.dev
    ports:
      - '8080:8080'
    environment:
      PORT: 8080
      NODE_ENV: production
      API_URL: https://etterlatte-api.dev.intern.nav.no
      BREV_API_URL: https://etterlatte-brev-api.dev.intern.nav.no
      VILKAARSVURDERING_API_URL: https://etterlatte-vilkaarsvurdering.dev.intern.nav.no
      BEHANDLING_API_URL: https://etterlatte-behandling.dev.intern.nav.no
    env_file:
      - .env.dev-gcp # Opprettes med script get-secret.sh. Les README

  wonderwall-dev-gcp:
    container_name: wonderwall-dev-gcp
    image: ghcr.io/nais/wonderwall:latest
    restart: on-failure
    ports:
      - "3000:3000"
    command: --openid.provider azure
    environment:
      WONDERWALL_INGRESS: http://localhost:3000
      WONDERWALL_BIND_ADDRESS: 0.0.0.0:3000
      WONDERWALL_UPSTREAM_HOST: host.docker.internal:5173
      WONDERWALL_AUTO_LOGIN: true
      WONDERWALL_LOG_FORMAT: text
    env_file:
      - .env.dev-gcp # Opprettes med script get-secret.sh. Les README
