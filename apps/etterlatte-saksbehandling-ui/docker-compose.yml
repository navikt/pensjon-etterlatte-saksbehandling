version: "3"
services:
  frackend-dev-gcp:
    container_name: frackend-dev-gcp
    build:
      context: server
      dockerfile: Dockerfile.dev
    ports:
      - '8080:8080'
    environment:
      PORT: 8080
      NODE_ENV: production
      GOSYS_URL: https://gosys-q2.dev.intern.nav.no/gosys
      RINA_URL: https://rina-ss3-q.adeo.no
      NORG2_URL: https://norg2.dev-fss-pub.nais.io
      APP_VERSION: 1
      # Lokale URL-er skal kommenteres ut n√•r de ikke er i bruk
#      BREV_API_URL: http://host.docker.internal:8084
#      BEHANDLING_API_URL: http://host.docker.internal:8090
    env_file:
      - .env.dev-gcp # Opprettes med script get-secret.sh. Les README

  wonderwall-dev-gcp:
    container_name: wonderwall-dev-gcp
    image: ghcr.io/nais/wonderwall:latest
    restart: on-failure
    ports:
      - "3000:3000"
    command: --openid.provider azure
    environment:
      WONDERWALL_INGRESS: http://localhost:3000
      WONDERWALL_BIND_ADDRESS: 0.0.0.0:3000
      WONDERWALL_UPSTREAM_HOST: host.docker.internal:5173
      WONDERWALL_AUTO_LOGIN: true
      WONDERWALL_LOG_FORMAT: text
    env_file:
      - .env.dev-gcp # Opprettes med script get-secret.sh. Les README
